<StructureMap xmlns="http://hl7.org/fhir">
   <id value="CdaChToBundle"/>
   <meta>
      <versionId value="3"/>
      <lastUpdated value="2022-01-12T14:16:01.097+00:00"/>
   </meta>
   <text>
      <status value="generated"/>
      <div xmlns="http://www.w3.org/1999/xhtml">
         <pre>map &quot;http://fhir.ch/ig/cda-fhir-maps/StructureMap/CdaChToBundle&quot; = &quot;CdaChToBundle&quot;


// CDA-CH document, 2.16.756.5.30.1.1.10.1.14
// 2020-01-16 Oliver Egger, copyright ahdis ag, Apache License
// CDA-CH:  https://art-decor.org/art-decor/decor-templates--hl7chcda-
// FHIR CH-Core: http://fhir.ch/ig/ch-core/index.html

uses &quot;http://hl7.org/fhir/cda/StructureDefinition/ClinicalDocument&quot; alias ClinicalDocument as source
uses &quot;http://hl7.org/fhir/cda/StructureDefinition/Section&quot; alias Section as queried
uses &quot;http://hl7.org/fhir/cda/StructureDefinition/PatientRole&quot; alias PatientRole as queried
uses &quot;http://hl7.org/fhir/cda/StructureDefinition/DataEnterer&quot; alias DataEnterer as queried
uses &quot;http://hl7.org/fhir/StructureDefinition/Bundle&quot; alias Bundle as target
uses &quot;http://hl7.org/fhir/StructureDefinition/Composition&quot; alias Composition as produced
uses &quot;http://hl7.org/fhir/StructureDefinition/Patient&quot; alias Patient as produced
uses &quot;http://hl7.org/fhir/StructureDefinition/Person&quot; alias Person as produced
uses &quot;http://hl7.org/fhir/StructureDefinition/Practitioner&quot; alias Practitioner as produced
uses &quot;http://hl7.org/fhir/StructureDefinition/Practitioner&quot; alias PractitionerRole as produced
uses &quot;http://hl7.org/fhir/StructureDefinition/Organization&quot; alias Organization as produced

imports &quot;http://fhir.ch/ig/cda-fhir-maps/StructureMap/CdaToFhirTypes&quot;
imports &quot;http://fhir.ch/ig/cda-fhir-maps/StructureMap/CdaToBundle&quot;

// source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.1.14
// target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-core-document.html
group CdaChToBundle(source cda : ClinicalDocument, target bundle : Bundle) {
  cda -&gt;  bundle.entry as e,  e.resource = create(&apos;Composition&apos;) as composition,  composition.id = uuid() as uuid,  e.fullUrl = append(&apos;urn:uuid:&apos;, uuid),  bundle.entry as e2,  e2.resource = create(&apos;Patient&apos;) as patient,  patient.id = uuid() as uuid2,  e2.fullUrl = append(&apos;urn:uuid:&apos;, uuid2) then ClinicalDocumentChToBundle(cda, patient, composition, bundle) &quot;ClinicalDocumentToBody&quot;;
}

// source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.1.14
// target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-core-document.html
group ClinicalDocumentChToBundle(source cda : ClinicalDocument, target patient : Patient, target composition : Composition, target bundle : Bundle) extends ClinicalDocumentToBundle {
  cda then ClinicalDocumentCompositionCh(cda, composition, patient, bundle) &quot;composition&quot;;
  cda.component as component then {
    component.structuredBody as body then {
      body.component as component then {
        component.section as srcSection where (templateId.where(root = &apos;2.16.756.5.30.1.1.10.3.2&apos;)) -&gt; composition.section as tgtSection then ClinicalDocumentSection(cda, srcSection, patient, tgtSection, bundle);
        component.section as srcSection where (templateId.where(root = &apos;2.16.756.5.30.1.1.10.3.45&apos;)) -&gt; composition.section as tgtSection then SectionOriginalRepresentation(cda, srcSection, patient, tgtSection, bundle);
      };
    } &quot;body&quot;;
  };
}

// _________________________ Section Level Templates _________________________
// source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.1.14
// target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-core-composition-definitions.html#Composition.section
// TODO: not excplicitly modeled in CH-Core
group SectionOriginalRepresentation(source cda : ClinicalDocument, source src : Section, source patient : Patient, target tgt, target bundle : Bundle) extends ClinicalDocumentSection {
  src.entry as cdaEntry -&gt;  bundle.entry as e,  e.resource = create(&apos;Binary&apos;) as binary,  binary.id = uuid() as uuid,  e.fullUrl = append(&apos;urn:uuid:&apos;, uuid) as urnuuid,  tgt.entry = create(&apos;Reference&apos;) as reference,  reference.reference = urnuuid then {
    cdaEntry.observationMedia as observationMedia then {
      observationMedia then ObservationMedia(observationMedia, binary) &quot;observationMedia&quot;;
      observationMedia.ID as value -&gt; reference.extension as ext then NarrativeLink(value, ext) &quot;narrativeLink&quot;;
    };
  } &quot;cdaEntry&quot;;
}

// _________________________ Entry Level Templates   ________________________
// source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.4.83
// TODO: not excplicitly modeled in CH-Core
group ObservationMedia(source observationMedia, target binary : Binary) {
  observationMedia.value as value then {
    value.mediaType as mediaType -&gt; binary.contentType = mediaType &quot;contentType&quot;;
    value -&gt; binary.data = (value.dataBase64Binary) &quot;dataString&quot;;
  };
  observationMedia.languageCode as languageCode then {
    languageCode.code as lang -&gt; binary.language = lang &quot;lang&quot;;
  };
}

// _________________________ Header Level Templates _________________________
// source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.9.36
// target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-ext-epr-confidentialitycode.html
group ChExtEprConfidentialityCode(source src : CE, target ext : Extension) {
  src -&gt; ext.url = &apos;http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-confidentialitycode&apos; &quot;url&quot;;
  src -&gt; ext.value = create(&apos;CodeableConcept&apos;) as value then CECodeableConcept(src, value) &quot;code&quot;;
}

// source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.9.36
// target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-ext-epr-versionnumber.html
group ChExtEprVersionNumber(source src : INT, target ext : Extension) {
  src -&gt; ext.url = &apos;http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-versionnumber&apos; &quot;url&quot;;
  src -&gt; ext.value = create(&apos;unsignedInt&apos;) as value then INT(src, value) &quot;value&quot;;
}

group ChExtEprVersionNumber1(source src, target ext : Extension) {
  src -&gt; ext.url = &apos;http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-versionnumber&apos; &quot;url&quot;;
  src -&gt;  ext.value = create(&apos;unsignedInt&apos;) as value,  value.value = &apos;1&apos; &quot;value&quot;;
}

// source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.9.36
// target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-ext-epr-informationrecipient.html
group ChExtEprInformationRecipient(source src : IntendedRecipient, target patient : Patient, target ext : Extension) {
  src -&gt; ext.url = &apos;http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-informationrecipient&apos; &quot;url&quot;;
  src -&gt;  ext.value = create(&apos;Reference&apos;) as reference,  reference.reference = (&apos;urn:uuid:&apos; + %patient.id) &quot;value&quot;;
  src.addr as addr -&gt; patient.address as address then ADAddress(addr, address) &quot;address&quot;;
  src.informationRecipient as informationRecipient then {
    informationRecipient.name as cdaname -&gt; patient.name as fhirname then ENHumanName(cdaname, fhirname);
  };
}

// source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.9.36
// target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-ext-epr-informationrecipient.html
group ChExtEprInformationRecipientOrganization(source src : IntendedRecipient, target organization : Organization, target ext : Extension) {
  src -&gt; ext.url = &apos;http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-informationrecipient&apos; &quot;url&quot;;
  src -&gt;  ext.value = create(&apos;Reference&apos;) as reference,  reference.reference = (&apos;urn:uuid:&apos; + %organization.id) &quot;value&quot;;
  src.receivedOrganization as receivedOrganization then ClinicalDocumentOrganization(receivedOrganization, organization) &quot;organization&quot;;
}

// source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?section=templates&amp;id=2.16.756.5.30.1.1.10.2.7
// target: http://build.fhir.org/ig/hl7ch/ch-core/StructureDefinition-ch-ext-epr-dataenterer.html
group ChExtEprDataEnterer(source src : DataEnterer, target bundle : Bundle, target practitionerRole : PractitionerRole, target ext : Extension) {
  src -&gt; ext.url = &apos;http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-dataenterer&apos; &quot;url&quot;;
  src.assignedEntity as assignedEntity -&gt;  ext.extension as ext,  ext.url = &apos;enterer&apos;,  ext.value = create(&apos;Reference&apos;) as reference,  reference.reference = (&apos;urn:uuid:&apos; + %practitionerRole.id) &quot;PractitionerRole&quot;;
  src.time as time -&gt; ext.extension as exttime then ChExtEprTime(time, exttime);
  src.assignedEntity as assignedEntity then {
    assignedEntity -&gt;  bundle.entry as e,  e.resource = create(&apos;Practitioner&apos;) as practitioner,  practitioner.id = uuid() as uuid,  e.fullUrl = append(&apos;urn:uuid:&apos;, uuid),  practitionerRole.practitioner = create(&apos;Reference&apos;) as reference,  reference.reference = append(&apos;urn:uuid:&apos;, uuid) then ClinicalDocumentEntityPractitioner(assignedEntity, practitioner) &quot;Practitioner&quot;;
    assignedEntity.representedOrganization as representedOrganization -&gt;  bundle.entry as e,  e.resource = create(&apos;Organization&apos;) as organization,  organization.id = uuid() as uuid2,  e.fullUrl = append(&apos;urn:uuid:&apos;, uuid2),  practitionerRole.organization = create(&apos;Reference&apos;) as referenceOrg,  referenceOrg.reference = append(&apos;urn:uuid:&apos;, uuid2) then ClinicalDocumentOrganization(representedOrganization, organization) &quot;Organization&quot;;
  };
}

// _________________________ Template Type not specified  ___________________
// source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.9.36
// target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-core-composition-epr.html
group ClinicalDocumentCompositionCh(source src : ClinicalDocument, target tgt : Composition, target patientResource : Patient, target bundle : Bundle) {
  src.confidentialityCode as confidentialityCode then {
    confidentialityCode.code as v where (&apos;http://fhir.ch/ig/ch-epr-term/ValueSet/DocumentEntry.confidentialityCode&apos;.resolve().compose.include.concept.where($this.code = src.confidentialityCode.code).exists()) -&gt;  tgt.confidentiality = translate(v, &apos;http://fhir.ch/ig/ch-core/ConceptMap/documententry-confidentialitycode-to-fhir&apos;, &apos;code&apos;) as fhirconf,  fhirconf.extension as ext then ChExtEprConfidentialityCode(confidentialityCode, ext) &quot;confCode&quot;;
  };
  src.versionNumber as versionNumber where (versionNumber &gt; 1) -&gt; tgt.extension as ext2 then ChExtEprVersionNumber(versionNumber, ext2);
  src.informationRecipient as informationRecipient -&gt; bundle.entry as e then {
    informationRecipient.intendedRecipient as intendedRecipient where $this.receivedOrganization.exists() = false -&gt;  e.resource = create(&apos;Patient&apos;) as recipient,  recipient.id = uuid() as uuid,  e.fullUrl = append(&apos;urn:uuid:&apos;, uuid),  tgt.extension as ext then ChExtEprInformationRecipient(intendedRecipient, recipient, ext) &quot;informationRecipient&quot;;
    informationRecipient.intendedRecipient as intendedRecipient then {
      intendedRecipient.receivedOrganization -&gt;  e.resource = create(&apos;Organization&apos;) as recipient,  recipient.id = uuid() as uuid2,  e.fullUrl = append(&apos;urn:uuid:&apos;, uuid2),  tgt.extension as ext then ChExtEprInformationRecipientOrganization(intendedRecipient, recipient, ext) &quot;informationRecipientOrganization&quot;;
    } &quot;intendedRecipientAsOrganization&quot;;
  } &quot;entry&quot;;
  src.dataEnterer as dataEnterer -&gt;  bundle.entry as e,  e.resource = create(&apos;PractitionerRole&apos;) as practitionerRole,  practitionerRole.id = uuid() as uuid,  e.fullUrl = append(&apos;urn:uuid:&apos;, uuid),  tgt.extension as ext then ChExtEprDataEnterer(dataEnterer, bundle, practitionerRole, ext);
}

</pre>
      </div>
   </text>
   <url value="http://fhir.ch/ig/cda-fhir-maps/StructureMap/CdaChToBundle"/>
   <name value="CdaChToBundle"/>
   <description value="&#xd;&#xa;CDA-CH document, 2.16.756.5.30.1.1.10.1.14&#xd;&#xa;2020-01-16 Oliver Egger, copyright ahdis ag, Apache License&#xd;&#xa;CDA-CH:  https://art-decor.org/art-decor/decor-templates--hl7chcda-&#xd;&#xa;FHIR CH-Core: http://fhir.ch/ig/ch-core/index.html&#xd;&#xa;"/>
   <structure>
      <url value="http://hl7.org/fhir/cda/StructureDefinition/ClinicalDocument"/>
      <mode value="source"/>
      <alias value="ClinicalDocument"/>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/cda/StructureDefinition/Section"/>
      <mode value="queried"/>
      <alias value="Section"/>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/cda/StructureDefinition/PatientRole"/>
      <mode value="queried"/>
      <alias value="PatientRole"/>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/cda/StructureDefinition/DataEnterer"/>
      <mode value="queried"/>
      <alias value="DataEnterer"/>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Bundle"/>
      <mode value="target"/>
      <alias value="Bundle"/>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Composition"/>
      <mode value="produced"/>
      <alias value="Composition"/>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Patient"/>
      <mode value="produced"/>
      <alias value="Patient"/>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Person"/>
      <mode value="produced"/>
      <alias value="Person"/>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Practitioner"/>
      <mode value="produced"/>
      <alias value="Practitioner"/>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Practitioner"/>
      <mode value="produced"/>
      <alias value="PractitionerRole"/>
   </structure>
   <structure>
      <url value="http://hl7.org/fhir/StructureDefinition/Organization"/>
      <mode value="produced"/>
      <alias value="Organization"/>
   </structure>
   <import value="http://fhir.ch/ig/cda-fhir-maps/StructureMap/CdaToFhirTypes"/>
   <import value="http://fhir.ch/ig/cda-fhir-maps/StructureMap/CdaToBundle"/>
   <group>
      <name value="CdaChToBundle"/>
      <typeMode value="none"/>
      <documentation value="source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.1.14&#xd;&#xa;target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-core-document.html"/>
      <input>
         <name value="cda"/>
         <type value="ClinicalDocument"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="bundle"/>
         <type value="Bundle"/>
         <mode value="target"/>
      </input>
      <rule>
         <name value="ClinicalDocumentToBody"/>
         <source>
            <context value="cda"/>
         </source>
         <target>
            <context value="bundle"/>
            <contextType value="variable"/>
            <element value="entry"/>
            <variable value="e"/>
         </target>
         <target>
            <context value="e"/>
            <contextType value="variable"/>
            <element value="resource"/>
            <variable value="composition"/>
            <transform value="create"/>
            <parameter>
               <valueString value="Composition"/>
            </parameter>
         </target>
         <target>
            <context value="composition"/>
            <contextType value="variable"/>
            <element value="id"/>
            <variable value="uuid"/>
            <transform value="uuid"/>
         </target>
         <target>
            <context value="e"/>
            <contextType value="variable"/>
            <element value="fullUrl"/>
            <transform value="append"/>
            <parameter>
               <valueString value="urn:uuid:"/>
            </parameter>
            <parameter>
               <valueId value="uuid"/>
            </parameter>
         </target>
         <target>
            <context value="bundle"/>
            <contextType value="variable"/>
            <element value="entry"/>
            <variable value="e2"/>
         </target>
         <target>
            <context value="e2"/>
            <contextType value="variable"/>
            <element value="resource"/>
            <variable value="patient"/>
            <transform value="create"/>
            <parameter>
               <valueString value="Patient"/>
            </parameter>
         </target>
         <target>
            <context value="patient"/>
            <contextType value="variable"/>
            <element value="id"/>
            <variable value="uuid2"/>
            <transform value="uuid"/>
         </target>
         <target>
            <context value="e2"/>
            <contextType value="variable"/>
            <element value="fullUrl"/>
            <transform value="append"/>
            <parameter>
               <valueString value="urn:uuid:"/>
            </parameter>
            <parameter>
               <valueId value="uuid2"/>
            </parameter>
         </target>
         <dependent>
            <name value="ClinicalDocumentChToBundle"/>
            <variable value="cda"/>
            <variable value="patient"/>
            <variable value="composition"/>
            <variable value="bundle"/>
         </dependent>
      </rule>
   </group>
   <group>
      <name value="ClinicalDocumentChToBundle"/>
      <extends value="ClinicalDocumentToBundle"/>
      <typeMode value="none"/>
      <documentation value="source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.1.14&#xd;&#xa;target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-core-document.html"/>
      <input>
         <name value="cda"/>
         <type value="ClinicalDocument"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="patient"/>
         <type value="Patient"/>
         <mode value="target"/>
      </input>
      <input>
         <name value="composition"/>
         <type value="Composition"/>
         <mode value="target"/>
      </input>
      <input>
         <name value="bundle"/>
         <type value="Bundle"/>
         <mode value="target"/>
      </input>
      <rule>
         <name value="composition"/>
         <source>
            <context value="cda"/>
         </source>
         <dependent>
            <name value="ClinicalDocumentCompositionCh"/>
            <variable value="cda"/>
            <variable value="composition"/>
            <variable value="patient"/>
            <variable value="bundle"/>
         </dependent>
      </rule>
      <rule>
         <name value="component"/>
         <source>
            <context value="cda"/>
            <element value="component"/>
            <variable value="component"/>
         </source>
         <rule>
            <name value="body"/>
            <source>
               <context value="component"/>
               <element value="structuredBody"/>
               <variable value="body"/>
            </source>
            <rule>
               <name value="component"/>
               <source>
                  <context value="body"/>
                  <element value="component"/>
                  <variable value="component"/>
               </source>
               <rule>
                  <name value="section"/>
                  <source>
                     <context value="component"/>
                     <element value="section"/>
                     <variable value="srcSection"/>
                     <condition value="(templateId.where(root = '2.16.756.5.30.1.1.10.3.2'))"/>
                  </source>
                  <target>
                     <context value="composition"/>
                     <contextType value="variable"/>
                     <element value="section"/>
                     <variable value="tgtSection"/>
                  </target>
                  <dependent>
                     <name value="ClinicalDocumentSection"/>
                     <variable value="cda"/>
                     <variable value="srcSection"/>
                     <variable value="patient"/>
                     <variable value="tgtSection"/>
                     <variable value="bundle"/>
                  </dependent>
               </rule>
               <rule>
                  <name value="section"/>
                  <source>
                     <context value="component"/>
                     <element value="section"/>
                     <variable value="srcSection"/>
                     <condition value="(templateId.where(root = '2.16.756.5.30.1.1.10.3.45'))"/>
                  </source>
                  <target>
                     <context value="composition"/>
                     <contextType value="variable"/>
                     <element value="section"/>
                     <variable value="tgtSection"/>
                  </target>
                  <dependent>
                     <name value="SectionOriginalRepresentation"/>
                     <variable value="cda"/>
                     <variable value="srcSection"/>
                     <variable value="patient"/>
                     <variable value="tgtSection"/>
                     <variable value="bundle"/>
                  </dependent>
               </rule>
            </rule>
         </rule>
      </rule>
   </group>
   <group>
      <name value="SectionOriginalRepresentation"/>
      <extends value="ClinicalDocumentSection"/>
      <typeMode value="none"/>
      <documentation value="_________________________ Section Level Templates _________________________&#xd;&#xa;source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.1.14&#xd;&#xa;target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-core-composition-definitions.html#Composition.section&#xd;&#xa;TODO: not excplicitly modeled in CH-Core"/>
      <input>
         <name value="cda"/>
         <type value="ClinicalDocument"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="src"/>
         <type value="Section"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="patient"/>
         <type value="Patient"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="tgt"/>
         <mode value="target"/>
      </input>
      <input>
         <name value="bundle"/>
         <type value="Bundle"/>
         <mode value="target"/>
      </input>
      <rule>
         <name value="cdaEntry"/>
         <source>
            <context value="src"/>
            <element value="entry"/>
            <variable value="cdaEntry"/>
         </source>
         <target>
            <context value="bundle"/>
            <contextType value="variable"/>
            <element value="entry"/>
            <variable value="e"/>
         </target>
         <target>
            <context value="e"/>
            <contextType value="variable"/>
            <element value="resource"/>
            <variable value="binary"/>
            <transform value="create"/>
            <parameter>
               <valueString value="Binary"/>
            </parameter>
         </target>
         <target>
            <context value="binary"/>
            <contextType value="variable"/>
            <element value="id"/>
            <variable value="uuid"/>
            <transform value="uuid"/>
         </target>
         <target>
            <context value="e"/>
            <contextType value="variable"/>
            <element value="fullUrl"/>
            <variable value="urnuuid"/>
            <transform value="append"/>
            <parameter>
               <valueString value="urn:uuid:"/>
            </parameter>
            <parameter>
               <valueId value="uuid"/>
            </parameter>
         </target>
         <target>
            <context value="tgt"/>
            <contextType value="variable"/>
            <element value="entry"/>
            <variable value="reference"/>
            <transform value="create"/>
            <parameter>
               <valueString value="Reference"/>
            </parameter>
         </target>
         <target>
            <context value="reference"/>
            <contextType value="variable"/>
            <element value="reference"/>
            <transform value="copy"/>
            <parameter>
               <valueId value="urnuuid"/>
            </parameter>
         </target>
         <rule>
            <name value="observationMedia"/>
            <source>
               <context value="cdaEntry"/>
               <element value="observationMedia"/>
               <variable value="observationMedia"/>
            </source>
            <rule>
               <name value="observationMedia"/>
               <source>
                  <context value="observationMedia"/>
               </source>
               <dependent>
                  <name value="ObservationMedia"/>
                  <variable value="observationMedia"/>
                  <variable value="binary"/>
               </dependent>
            </rule>
            <rule>
               <name value="narrativeLink"/>
               <source>
                  <context value="observationMedia"/>
                  <element value="ID"/>
                  <variable value="value"/>
               </source>
               <target>
                  <context value="reference"/>
                  <contextType value="variable"/>
                  <element value="extension"/>
                  <variable value="ext"/>
               </target>
               <dependent>
                  <name value="NarrativeLink"/>
                  <variable value="value"/>
                  <variable value="ext"/>
               </dependent>
            </rule>
         </rule>
      </rule>
   </group>
   <group>
      <name value="ObservationMedia"/>
      <typeMode value="none"/>
      <documentation value="_________________________ Entry Level Templates   ________________________&#xd;&#xa;source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.4.83&#xd;&#xa;TODO: not excplicitly modeled in CH-Core"/>
      <input>
         <name value="observationMedia"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="binary"/>
         <type value="Binary"/>
         <mode value="target"/>
      </input>
      <rule>
         <name value="value"/>
         <source>
            <context value="observationMedia"/>
            <element value="value"/>
            <variable value="value"/>
         </source>
         <rule>
            <name value="contentType"/>
            <source>
               <context value="value"/>
               <element value="mediaType"/>
               <variable value="mediaType"/>
            </source>
            <target>
               <context value="binary"/>
               <contextType value="variable"/>
               <element value="contentType"/>
               <transform value="copy"/>
               <parameter>
                  <valueId value="mediaType"/>
               </parameter>
            </target>
         </rule>
         <rule>
            <name value="dataString"/>
            <source>
               <context value="value"/>
            </source>
            <target>
               <context value="binary"/>
               <contextType value="variable"/>
               <element value="data"/>
               <transform value="evaluate"/>
               <parameter>
                  <valueString value="value.dataBase64Binary"/>
               </parameter>
            </target>
         </rule>
      </rule>
      <rule>
         <name value="languageCode"/>
         <source>
            <context value="observationMedia"/>
            <element value="languageCode"/>
            <variable value="languageCode"/>
         </source>
         <rule>
            <name value="lang"/>
            <source>
               <context value="languageCode"/>
               <element value="code"/>
               <variable value="lang"/>
            </source>
            <target>
               <context value="binary"/>
               <contextType value="variable"/>
               <element value="language"/>
               <transform value="copy"/>
               <parameter>
                  <valueId value="lang"/>
               </parameter>
            </target>
         </rule>
      </rule>
   </group>
   <group>
      <name value="ChExtEprConfidentialityCode"/>
      <typeMode value="none"/>
      <documentation value="_________________________ Header Level Templates _________________________&#xd;&#xa;source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.9.36&#xd;&#xa;target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-ext-epr-confidentialitycode.html"/>
      <input>
         <name value="src"/>
         <type value="CE"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="ext"/>
         <type value="Extension"/>
         <mode value="target"/>
      </input>
      <rule>
         <name value="url"/>
         <source>
            <context value="src"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="url"/>
            <transform value="copy"/>
            <parameter>
               <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-confidentialitycode"/>
            </parameter>
         </target>
      </rule>
      <rule>
         <name value="code"/>
         <source>
            <context value="src"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="value"/>
            <variable value="value"/>
            <transform value="create"/>
            <parameter>
               <valueString value="CodeableConcept"/>
            </parameter>
         </target>
         <dependent>
            <name value="CECodeableConcept"/>
            <variable value="src"/>
            <variable value="value"/>
         </dependent>
      </rule>
   </group>
   <group>
      <name value="ChExtEprVersionNumber"/>
      <typeMode value="none"/>
      <documentation value="source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.9.36&#xd;&#xa;target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-ext-epr-versionnumber.html"/>
      <input>
         <name value="src"/>
         <type value="INT"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="ext"/>
         <type value="Extension"/>
         <mode value="target"/>
      </input>
      <rule>
         <name value="url"/>
         <source>
            <context value="src"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="url"/>
            <transform value="copy"/>
            <parameter>
               <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-versionnumber"/>
            </parameter>
         </target>
      </rule>
      <rule>
         <name value="value"/>
         <source>
            <context value="src"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="value"/>
            <variable value="value"/>
            <transform value="create"/>
            <parameter>
               <valueString value="unsignedInt"/>
            </parameter>
         </target>
         <dependent>
            <name value="INT"/>
            <variable value="src"/>
            <variable value="value"/>
         </dependent>
      </rule>
   </group>
   <group>
      <name value="ChExtEprVersionNumber1"/>
      <typeMode value="none"/>
      <input>
         <name value="src"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="ext"/>
         <type value="Extension"/>
         <mode value="target"/>
      </input>
      <rule>
         <name value="url"/>
         <source>
            <context value="src"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="url"/>
            <transform value="copy"/>
            <parameter>
               <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-versionnumber"/>
            </parameter>
         </target>
      </rule>
      <rule>
         <name value="value"/>
         <source>
            <context value="src"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="value"/>
            <variable value="value"/>
            <transform value="create"/>
            <parameter>
               <valueString value="unsignedInt"/>
            </parameter>
         </target>
         <target>
            <context value="value"/>
            <contextType value="variable"/>
            <element value="value"/>
            <transform value="copy"/>
            <parameter>
               <valueString value="1"/>
            </parameter>
         </target>
      </rule>
   </group>
   <group>
      <name value="ChExtEprInformationRecipient"/>
      <typeMode value="none"/>
      <documentation value="source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.9.36&#xd;&#xa;target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-ext-epr-informationrecipient.html"/>
      <input>
         <name value="src"/>
         <type value="IntendedRecipient"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="patient"/>
         <type value="Patient"/>
         <mode value="target"/>
      </input>
      <input>
         <name value="ext"/>
         <type value="Extension"/>
         <mode value="target"/>
      </input>
      <rule>
         <name value="url"/>
         <source>
            <context value="src"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="url"/>
            <transform value="copy"/>
            <parameter>
               <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-informationrecipient"/>
            </parameter>
         </target>
      </rule>
      <rule>
         <name value="value"/>
         <source>
            <context value="src"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="value"/>
            <variable value="reference"/>
            <transform value="create"/>
            <parameter>
               <valueString value="Reference"/>
            </parameter>
         </target>
         <target>
            <context value="reference"/>
            <contextType value="variable"/>
            <element value="reference"/>
            <transform value="evaluate"/>
            <parameter>
               <valueString value="'urn:uuid:' + %patient.id"/>
            </parameter>
         </target>
      </rule>
      <rule>
         <name value="address"/>
         <source>
            <context value="src"/>
            <element value="addr"/>
            <variable value="addr"/>
         </source>
         <target>
            <context value="patient"/>
            <contextType value="variable"/>
            <element value="address"/>
            <variable value="address"/>
         </target>
         <dependent>
            <name value="ADAddress"/>
            <variable value="addr"/>
            <variable value="address"/>
         </dependent>
      </rule>
      <rule>
         <name value="informationRecipient"/>
         <source>
            <context value="src"/>
            <element value="informationRecipient"/>
            <variable value="informationRecipient"/>
         </source>
         <rule>
            <name value="name"/>
            <source>
               <context value="informationRecipient"/>
               <element value="name"/>
               <variable value="cdaname"/>
            </source>
            <target>
               <context value="patient"/>
               <contextType value="variable"/>
               <element value="name"/>
               <variable value="fhirname"/>
            </target>
            <dependent>
               <name value="ENHumanName"/>
               <variable value="cdaname"/>
               <variable value="fhirname"/>
            </dependent>
         </rule>
      </rule>
   </group>
   <group>
      <name value="ChExtEprInformationRecipientOrganization"/>
      <typeMode value="none"/>
      <documentation value="source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.9.36&#xd;&#xa;target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-ext-epr-informationrecipient.html"/>
      <input>
         <name value="src"/>
         <type value="IntendedRecipient"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="organization"/>
         <type value="Organization"/>
         <mode value="target"/>
      </input>
      <input>
         <name value="ext"/>
         <type value="Extension"/>
         <mode value="target"/>
      </input>
      <rule>
         <name value="url"/>
         <source>
            <context value="src"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="url"/>
            <transform value="copy"/>
            <parameter>
               <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-informationrecipient"/>
            </parameter>
         </target>
      </rule>
      <rule>
         <name value="value"/>
         <source>
            <context value="src"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="value"/>
            <variable value="reference"/>
            <transform value="create"/>
            <parameter>
               <valueString value="Reference"/>
            </parameter>
         </target>
         <target>
            <context value="reference"/>
            <contextType value="variable"/>
            <element value="reference"/>
            <transform value="evaluate"/>
            <parameter>
               <valueString value="'urn:uuid:' + %organization.id"/>
            </parameter>
         </target>
      </rule>
      <rule>
         <name value="organization"/>
         <source>
            <context value="src"/>
            <element value="receivedOrganization"/>
            <variable value="receivedOrganization"/>
         </source>
         <dependent>
            <name value="ClinicalDocumentOrganization"/>
            <variable value="receivedOrganization"/>
            <variable value="organization"/>
         </dependent>
      </rule>
   </group>
   <group>
      <name value="ChExtEprDataEnterer"/>
      <typeMode value="none"/>
      <documentation value="source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?section=templates&amp;id=2.16.756.5.30.1.1.10.2.7&#xd;&#xa;target: http://build.fhir.org/ig/hl7ch/ch-core/StructureDefinition-ch-ext-epr-dataenterer.html"/>
      <input>
         <name value="src"/>
         <type value="DataEnterer"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="bundle"/>
         <type value="Bundle"/>
         <mode value="target"/>
      </input>
      <input>
         <name value="practitionerRole"/>
         <type value="PractitionerRole"/>
         <mode value="target"/>
      </input>
      <input>
         <name value="ext"/>
         <type value="Extension"/>
         <mode value="target"/>
      </input>
      <rule>
         <name value="url"/>
         <source>
            <context value="src"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="url"/>
            <transform value="copy"/>
            <parameter>
               <valueString value="http://fhir.ch/ig/ch-core/StructureDefinition/ch-ext-epr-dataenterer"/>
            </parameter>
         </target>
      </rule>
      <rule>
         <name value="PractitionerRole"/>
         <source>
            <context value="src"/>
            <element value="assignedEntity"/>
            <variable value="assignedEntity"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="extension"/>
            <variable value="ext"/>
         </target>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="url"/>
            <transform value="copy"/>
            <parameter>
               <valueString value="enterer"/>
            </parameter>
         </target>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="value"/>
            <variable value="reference"/>
            <transform value="create"/>
            <parameter>
               <valueString value="Reference"/>
            </parameter>
         </target>
         <target>
            <context value="reference"/>
            <contextType value="variable"/>
            <element value="reference"/>
            <transform value="evaluate"/>
            <parameter>
               <valueString value="'urn:uuid:' + %practitionerRole.id"/>
            </parameter>
         </target>
      </rule>
      <rule>
         <name value="time"/>
         <source>
            <context value="src"/>
            <element value="time"/>
            <variable value="time"/>
         </source>
         <target>
            <context value="ext"/>
            <contextType value="variable"/>
            <element value="extension"/>
            <variable value="exttime"/>
         </target>
         <dependent>
            <name value="ChExtEprTime"/>
            <variable value="time"/>
            <variable value="exttime"/>
         </dependent>
      </rule>
      <rule>
         <name value="assignedEntity"/>
         <source>
            <context value="src"/>
            <element value="assignedEntity"/>
            <variable value="assignedEntity"/>
         </source>
         <rule>
            <name value="Practitioner"/>
            <source>
               <context value="assignedEntity"/>
            </source>
            <target>
               <context value="bundle"/>
               <contextType value="variable"/>
               <element value="entry"/>
               <variable value="e"/>
            </target>
            <target>
               <context value="e"/>
               <contextType value="variable"/>
               <element value="resource"/>
               <variable value="practitioner"/>
               <transform value="create"/>
               <parameter>
                  <valueString value="Practitioner"/>
               </parameter>
            </target>
            <target>
               <context value="practitioner"/>
               <contextType value="variable"/>
               <element value="id"/>
               <variable value="uuid"/>
               <transform value="uuid"/>
            </target>
            <target>
               <context value="e"/>
               <contextType value="variable"/>
               <element value="fullUrl"/>
               <transform value="append"/>
               <parameter>
                  <valueString value="urn:uuid:"/>
               </parameter>
               <parameter>
                  <valueId value="uuid"/>
               </parameter>
            </target>
            <target>
               <context value="practitionerRole"/>
               <contextType value="variable"/>
               <element value="practitioner"/>
               <variable value="reference"/>
               <transform value="create"/>
               <parameter>
                  <valueString value="Reference"/>
               </parameter>
            </target>
            <target>
               <context value="reference"/>
               <contextType value="variable"/>
               <element value="reference"/>
               <transform value="append"/>
               <parameter>
                  <valueString value="urn:uuid:"/>
               </parameter>
               <parameter>
                  <valueId value="uuid"/>
               </parameter>
            </target>
            <dependent>
               <name value="ClinicalDocumentEntityPractitioner"/>
               <variable value="assignedEntity"/>
               <variable value="practitioner"/>
            </dependent>
         </rule>
         <rule>
            <name value="Organization"/>
            <source>
               <context value="assignedEntity"/>
               <element value="representedOrganization"/>
               <variable value="representedOrganization"/>
            </source>
            <target>
               <context value="bundle"/>
               <contextType value="variable"/>
               <element value="entry"/>
               <variable value="e"/>
            </target>
            <target>
               <context value="e"/>
               <contextType value="variable"/>
               <element value="resource"/>
               <variable value="organization"/>
               <transform value="create"/>
               <parameter>
                  <valueString value="Organization"/>
               </parameter>
            </target>
            <target>
               <context value="organization"/>
               <contextType value="variable"/>
               <element value="id"/>
               <variable value="uuid2"/>
               <transform value="uuid"/>
            </target>
            <target>
               <context value="e"/>
               <contextType value="variable"/>
               <element value="fullUrl"/>
               <transform value="append"/>
               <parameter>
                  <valueString value="urn:uuid:"/>
               </parameter>
               <parameter>
                  <valueId value="uuid2"/>
               </parameter>
            </target>
            <target>
               <context value="practitionerRole"/>
               <contextType value="variable"/>
               <element value="organization"/>
               <variable value="referenceOrg"/>
               <transform value="create"/>
               <parameter>
                  <valueString value="Reference"/>
               </parameter>
            </target>
            <target>
               <context value="referenceOrg"/>
               <contextType value="variable"/>
               <element value="reference"/>
               <transform value="append"/>
               <parameter>
                  <valueString value="urn:uuid:"/>
               </parameter>
               <parameter>
                  <valueId value="uuid2"/>
               </parameter>
            </target>
            <dependent>
               <name value="ClinicalDocumentOrganization"/>
               <variable value="representedOrganization"/>
               <variable value="organization"/>
            </dependent>
         </rule>
      </rule>
   </group>
   <group>
      <name value="ClinicalDocumentCompositionCh"/>
      <typeMode value="none"/>
      <documentation value="_________________________ Template Type not specified  ___________________&#xd;&#xa;source: https://art-decor.org/art-decor/decor-templates--hl7chcda-?id=2.16.756.5.30.1.1.10.9.36&#xd;&#xa;target: http://build.fhir.org/ig/hl7ch/ch-core/branches/master/StructureDefinition-ch-core-composition-epr.html"/>
      <input>
         <name value="src"/>
         <type value="ClinicalDocument"/>
         <mode value="source"/>
      </input>
      <input>
         <name value="tgt"/>
         <type value="Composition"/>
         <mode value="target"/>
      </input>
      <input>
         <name value="patientResource"/>
         <type value="Patient"/>
         <mode value="target"/>
      </input>
      <input>
         <name value="bundle"/>
         <type value="Bundle"/>
         <mode value="target"/>
      </input>
      <rule>
         <name value="confidentialityCode"/>
         <source>
            <context value="src"/>
            <element value="confidentialityCode"/>
            <variable value="confidentialityCode"/>
         </source>
         <rule>
            <name value="confCode"/>
            <source>
               <context value="confidentialityCode"/>
               <element value="code"/>
               <variable value="v"/>
               <condition value="('http://fhir.ch/ig/ch-epr-term/ValueSet/DocumentEntry.confidentialityCode'.resolve().compose.include.concept.where($this.code = src.confidentialityCode.code).exists())"/>
            </source>
            <target>
               <context value="tgt"/>
               <contextType value="variable"/>
               <element value="confidentiality"/>
               <variable value="fhirconf"/>
               <transform value="translate"/>
               <parameter>
                  <valueId value="v"/>
               </parameter>
               <parameter>
                  <valueString value="http://fhir.ch/ig/ch-core/ConceptMap/documententry-confidentialitycode-to-fhir"/>
               </parameter>
               <parameter>
                  <valueString value="code"/>
               </parameter>
            </target>
            <target>
               <context value="fhirconf"/>
               <contextType value="variable"/>
               <element value="extension"/>
               <variable value="ext"/>
            </target>
            <dependent>
               <name value="ChExtEprConfidentialityCode"/>
               <variable value="confidentialityCode"/>
               <variable value="ext"/>
            </dependent>
         </rule>
      </rule>
      <rule>
         <name value="versionNumber"/>
         <source>
            <context value="src"/>
            <element value="versionNumber"/>
            <variable value="versionNumber"/>
            <condition value="(versionNumber > 1)"/>
         </source>
         <target>
            <context value="tgt"/>
            <contextType value="variable"/>
            <element value="extension"/>
            <variable value="ext2"/>
         </target>
         <dependent>
            <name value="ChExtEprVersionNumber"/>
            <variable value="versionNumber"/>
            <variable value="ext2"/>
         </dependent>
      </rule>
      <rule>
         <name value="entry"/>
         <source>
            <context value="src"/>
            <element value="informationRecipient"/>
            <variable value="informationRecipient"/>
         </source>
         <target>
            <context value="bundle"/>
            <contextType value="variable"/>
            <element value="entry"/>
            <variable value="e"/>
         </target>
         <rule>
            <name value="informationRecipient"/>
            <source>
               <context value="informationRecipient"/>
               <element value="intendedRecipient"/>
               <variable value="intendedRecipient"/>
               <condition value="$this.receivedOrganization.exists() = false"/>
            </source>
            <target>
               <context value="e"/>
               <contextType value="variable"/>
               <element value="resource"/>
               <variable value="recipient"/>
               <transform value="create"/>
               <parameter>
                  <valueString value="Patient"/>
               </parameter>
            </target>
            <target>
               <context value="recipient"/>
               <contextType value="variable"/>
               <element value="id"/>
               <variable value="uuid"/>
               <transform value="uuid"/>
            </target>
            <target>
               <context value="e"/>
               <contextType value="variable"/>
               <element value="fullUrl"/>
               <transform value="append"/>
               <parameter>
                  <valueString value="urn:uuid:"/>
               </parameter>
               <parameter>
                  <valueId value="uuid"/>
               </parameter>
            </target>
            <target>
               <context value="tgt"/>
               <contextType value="variable"/>
               <element value="extension"/>
               <variable value="ext"/>
            </target>
            <dependent>
               <name value="ChExtEprInformationRecipient"/>
               <variable value="intendedRecipient"/>
               <variable value="recipient"/>
               <variable value="ext"/>
            </dependent>
         </rule>
         <rule>
            <name value="intendedRecipientAsOrganization"/>
            <source>
               <context value="informationRecipient"/>
               <element value="intendedRecipient"/>
               <variable value="intendedRecipient"/>
            </source>
            <rule>
               <name value="informationRecipientOrganization"/>
               <source>
                  <context value="intendedRecipient"/>
                  <element value="receivedOrganization"/>
               </source>
               <target>
                  <context value="e"/>
                  <contextType value="variable"/>
                  <element value="resource"/>
                  <variable value="recipient"/>
                  <transform value="create"/>
                  <parameter>
                     <valueString value="Organization"/>
                  </parameter>
               </target>
               <target>
                  <context value="recipient"/>
                  <contextType value="variable"/>
                  <element value="id"/>
                  <variable value="uuid2"/>
                  <transform value="uuid"/>
               </target>
               <target>
                  <context value="e"/>
                  <contextType value="variable"/>
                  <element value="fullUrl"/>
                  <transform value="append"/>
                  <parameter>
                     <valueString value="urn:uuid:"/>
                  </parameter>
                  <parameter>
                     <valueId value="uuid2"/>
                  </parameter>
               </target>
               <target>
                  <context value="tgt"/>
                  <contextType value="variable"/>
                  <element value="extension"/>
                  <variable value="ext"/>
               </target>
               <dependent>
                  <name value="ChExtEprInformationRecipientOrganization"/>
                  <variable value="intendedRecipient"/>
                  <variable value="recipient"/>
                  <variable value="ext"/>
               </dependent>
            </rule>
         </rule>
      </rule>
      <rule>
         <name value="dataEnterer"/>
         <source>
            <context value="src"/>
            <element value="dataEnterer"/>
            <variable value="dataEnterer"/>
         </source>
         <target>
            <context value="bundle"/>
            <contextType value="variable"/>
            <element value="entry"/>
            <variable value="e"/>
         </target>
         <target>
            <context value="e"/>
            <contextType value="variable"/>
            <element value="resource"/>
            <variable value="practitionerRole"/>
            <transform value="create"/>
            <parameter>
               <valueString value="PractitionerRole"/>
            </parameter>
         </target>
         <target>
            <context value="practitionerRole"/>
            <contextType value="variable"/>
            <element value="id"/>
            <variable value="uuid"/>
            <transform value="uuid"/>
         </target>
         <target>
            <context value="e"/>
            <contextType value="variable"/>
            <element value="fullUrl"/>
            <transform value="append"/>
            <parameter>
               <valueString value="urn:uuid:"/>
            </parameter>
            <parameter>
               <valueId value="uuid"/>
            </parameter>
         </target>
         <target>
            <context value="tgt"/>
            <contextType value="variable"/>
            <element value="extension"/>
            <variable value="ext"/>
         </target>
         <dependent>
            <name value="ChExtEprDataEnterer"/>
            <variable value="dataEnterer"/>
            <variable value="bundle"/>
            <variable value="practitionerRole"/>
            <variable value="ext"/>
         </dependent>
      </rule>
   </group>
</StructureMap>